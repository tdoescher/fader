
(function($){$.fn.fader=function(options){options=options||{};var wrapper=$(this);var auto=options.auto||5000;var speed=options.speed||1000;var startFade=parseInt(options.startFade,10)||0;var continuous=options.continuous;var count=$('.fader-wrapper',wrapper).children().length-1;var play=1;function fade(to){$('.fade[data-index].active',wrapper).animate({opacity:0},speed).removeClass('active');$('.fade[data-index="'+to+'"]',wrapper).animate({opacity:1},speed).addClass('active');if(typeof options.menu=='object'){$('.fader-menu b[data-index].active',options.menu).removeClass('active');$('.fader-menu b[data-index="'+to+'"]',options.menu).addClass('active');}}
function fadeNext(){var next=parseInt($('.fade[data-index].active',wrapper).attr('data-index'))+1;if(next>count){next=0;}
fade(next);}
function fadePrev(){var id=$('.fade[data-index].active',wrapper).attr('data-index');if(id==0){var prev=count;}else{var prev=parseInt(id)-1;}
fade(prev);}
$('.fader-wrapper > div',wrapper).each(function(id){if(count<startFade)startFade=0;if(id==startFade){$(this).attr('data-index',id).addClass('fade start active');$('.fader-menu').append('<b data-index="'+id+'" class="active">•</b>');}else{$(this).attr('data-index',id).addClass('fade');$('.fader-menu').append('<b data-index="'+id+'">•</b>');}});if(typeof options.menu=='object'){$('.fader-prev',options.menu).bind('click',function(){fadePrev();return false;});$('.fader-next',options.menu).bind('click',function(){fadeNext();return false;});$('.fader-menu b',options.menu).bind('click',function(){fade($(this).attr('data-index'));});}
if(continuous==1){wrapper.bind('mouseenter mouseleave',function(){play=!play;});var autoFade=setInterval(function(){if(play){fadeNext();}},auto);}}}(jQuery));